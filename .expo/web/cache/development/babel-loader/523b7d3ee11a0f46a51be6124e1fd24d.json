{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useUser = useUser;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _auth = require(\"../contexts/auth\");\n\nvar _react = require(\"react\");\n\nfunction useUser() {\n  var _useContext = (0, _react.useContext)(_auth.AuthContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var setUser = function setUser(value) {\n    return _regenerator.default.async(function setUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (value == null) {\n              dispatch({\n                type: 'LOGOUT',\n                payload: {\n                  user: null,\n                  initialized: true\n                }\n              });\n            } else {\n              dispatch({\n                type: 'LOGIN',\n                payload: {\n                  user: value,\n                  initialized: true\n                }\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return [state.user, setUser];\n}","map":{"version":3,"sources":["C:/Users/venkatesh.devireddy/Projects/IoT_Central_CPM/src/hooks/auth.ts"],"names":["useUser","AuthContext","state","dispatch","setUser","value","type","payload","user","initialized"],"mappings":";;;;;;;;;AAAA;;AACA;;AAIO,SAASA,OAAT,GAAiD;AACpD,oBAA4B,uBAAWC,iBAAX,CAA5B;AAAA,MAAQC,KAAR,eAAQA,KAAR;AAAA,MAAeC,QAAf,eAAeA,QAAf;;AAEA,MAAMC,OAAqB,GAAG,SAAxBA,OAAwB,CAAgBC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAE1B,gBAAIA,KAAK,IAAI,IAAb,EAAmB;AACfF,cAAAA,QAAQ,CAAC;AACLG,gBAAAA,IAAI,EAAE,QADD;AAELC,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,IAAI,EAAE,IAAR;AAAcC,kBAAAA,WAAW,EAAE;AAA3B;AAFJ,eAAD,CAAR;AAKH,aAND,MAOK;AACDN,cAAAA,QAAQ,CAAC;AACLG,gBAAAA,IAAI,EAAE,OADD;AAELC,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,IAAI,EAAEH,KAAR;AAAeI,kBAAAA,WAAW,EAAE;AAA5B;AAFJ,eAAD,CAAR;AAIH;;AAdyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9B;;AAiBA,SAAO,CACHP,KAAK,CAACM,IADH,EAEHJ,OAFG,CAAP;AAIH","sourcesContent":["import { IUser, AuthContext } from \"../contexts/auth\";\r\nimport { useContext } from \"react\";\r\n\r\ntype UserDispatch = (value: IUser | null) => Promise<void>;\r\n\r\nexport function useUser(): [IUser | null, UserDispatch] {\r\n    const { state, dispatch } = useContext(AuthContext);\r\n\r\n    const setUser: UserDispatch = async function (value: IUser | null) {\r\n\r\n        if (value == null) {\r\n            dispatch({\r\n                type: 'LOGOUT',\r\n                payload: { user: null, initialized: true }\r\n            });\r\n\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: 'LOGIN',\r\n                payload: { user: value, initialized: true }\r\n            });\r\n        }\r\n    }\r\n\r\n    return [\r\n        state.user,\r\n        setUser\r\n    ]\r\n}"]},"metadata":{},"sourceType":"script"}